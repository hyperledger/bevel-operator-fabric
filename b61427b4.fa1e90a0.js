(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{104:function(e,r,t){"use strict";t.r(r),t.d(r,"frontMatter",(function(){return c})),t.d(r,"metadata",(function(){return u})),t.d(r,"toc",(function(){return l})),t.d(r,"default",(function(){return p}));var o=t(3),n=t(7),i=(t(0),t(119)),a=["components"],c={id:"migrate-network",title:"Migrate network"},u={unversionedId:"operator-guide/migrate-network",id:"operator-guide/migrate-network",isDocsHomePage:!1,title:"Migrate network",description:"This document is a walkthrough of the steps required to migrate a network from another method to the HLF operator.",source:"@site/docs/operator-guide/migrate-network.md",slug:"/operator-guide/migrate-network",permalink:"/hlf-operator/docs/operator-guide/migrate-network",editUrl:"https://github.com/hyperledger-labs/hlf-operator/edit/master/website/docs/operator-guide/migrate-network.md",version:"current",sidebar:"someSidebar1",previous:{title:"Configuration (Affinity, NodeSelector, Tolerations)",permalink:"/hlf-operator/docs/operator-guide/configuration"},next:{title:"Increase resources",permalink:"/hlf-operator/docs/operator-guide/increase-resources"}},l=[{value:"Peer migration",id:"peer-migration",children:[]},{value:"Ordering service migration",id:"ordering-service-migration",children:[]}],s={toc:l};function p(e){var r=e.components,t=Object(n.a)(e,a);return Object(i.b)("wrapper",Object(o.a)({},s,t,{components:r,mdxType:"MDXLayout"}),Object(i.b)("p",null,"This document is a walkthrough of the steps required to migrate a network from another method to the HLF operator."),Object(i.b)("h2",{id:"peer-migration"},"Peer migration"),Object(i.b)("p",null,"The best migration is to perform migration at all. For the peers this is possible by spinning up a new set of peers with new domains."),Object(i.b)("p",null,"In order to do this, we must create the certificate authority with the Keys and Certificates that were used to create the previous peer certificates."),Object(i.b)("h2",{id:"ordering-service-migration"},"Ordering service migration"),Object(i.b)("p",null,"For the ordering service, a new set of orderer nodes must be created with new domains. In order to do this, we must create the certificate authority with the Keys and Certificates that were used to create the previous peer certificates."),Object(i.b)("p",null,"For example, if we have an existing ordering service with the following URLs:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"orderer1.myorg.com:7050"),Object(i.b)("li",{parentName:"ul"},"orderer2.myorg.com:7050"),Object(i.b)("li",{parentName:"ul"},"orderer3.myorg.com:7050"),Object(i.b)("li",{parentName:"ul"},"orderer4.myorg.com:7050"),Object(i.b)("li",{parentName:"ul"},"orderer5.myorg.com:7050")),Object(i.b)("p",null,"We must create with the HLF operator the following orderer nodes:"),Object(i.b)("ul",null,Object(i.b)("li",{parentName:"ul"},"orderer6.myorg.com:7050"),Object(i.b)("li",{parentName:"ul"},"orderer7.myorg.com:7050"),Object(i.b)("li",{parentName:"ul"},"orderer8.myorg.com:7050"),Object(i.b)("li",{parentName:"ul"},"orderer9.myorg.com:7050"),Object(i.b)("li",{parentName:"ul"},"orderer10.myorg.com:7050")),Object(i.b)("p",null,"After these nodes are created, we must join them to the channel, when the orderer nodes are joined to the channel and we're confident enough about the new set of orderers, progressively, we must update the channel configuration to include the new orderers as consenters, and remove the old ones."))}p.isMDXComponent=!0},119:function(e,r,t){"use strict";t.d(r,"a",(function(){return p})),t.d(r,"b",(function(){return b}));var o=t(0),n=t.n(o);function i(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function a(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?a(Object(t),!0).forEach((function(r){i(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function u(e,r){if(null==e)return{};var t,o,n=function(e,r){if(null==e)return{};var t,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)t=i[o],r.indexOf(t)>=0||(n[t]=e[t]);return n}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)t=i[o],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(n[t]=e[t])}return n}var l=n.a.createContext({}),s=function(e){var r=n.a.useContext(l),t=r;return e&&(t="function"==typeof e?e(r):c(c({},r),e)),t},p=function(e){var r=s(e.components);return n.a.createElement(l.Provider,{value:r},e.children)},d={inlineCode:"code",wrapper:function(e){var r=e.children;return n.a.createElement(n.a.Fragment,{},r)}},m=n.a.forwardRef((function(e,r){var t=e.components,o=e.mdxType,i=e.originalType,a=e.parentName,l=u(e,["components","mdxType","originalType","parentName"]),p=s(t),m=o,b=p["".concat(a,".").concat(m)]||p[m]||d[m]||i;return t?n.a.createElement(b,c(c({ref:r},l),{},{components:t})):n.a.createElement(b,c({ref:r},l))}));function b(e,r){var t=arguments,o=r&&r.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=m;var c={};for(var u in r)hasOwnProperty.call(r,u)&&(c[u]=r[u]);c.originalType=e,c.mdxType="string"==typeof e?e:o,a[1]=c;for(var l=2;l<i;l++)a[l]=t[l];return n.a.createElement.apply(null,a)}return n.a.createElement.apply(null,t)}m.displayName="MDXCreateElement"}}]);